{
  "meta": {
    "project": "Manowzab Command Center",
    "date": "2026-02-06",
    "prepared_by": "Generated by AI Assistant"
  },
  "product_overview": "Manowzab Command Center is a specialized PWA designed to manage live commerce on Facebook/YouTube livestreams, enabling real-time stock management, automated order processing from chat messages, synchronized multi-device operation, and high-quality audio announcements through a hybrid TTS system.",
  "core_goals": [
    "Enable real-time stock management during live commerce sessions",
    "Automate order processing from chat messages to reduce manual workload",
    "Provide instant audio feedback (TTS and SFX) to enhance customer engagement",
    "Synchronize data and chat across multiple admin devices in real-time",
    "Maintain persistent sales and chat history with export capability",
    "Support offline and fallback modes for audio and connectivity",
    "Ensure robust compatibility with iPad Safari and desktop browsers"
  ],
  "key_features": [
    "Real-time stock inventory grid with color-coded availability and queue support",
    "Automated order detection from chat messages using regex and AI methods",
    "Multi-buy order processing with TTS summary playback",
    "Hybrid TTS system switching between Google Cloud TTS and Native Browser TTS",
    "iPad/iOS-specific audio unlock to enable autoplay of sound and voice",
    "Sound effect playback for success and error events",
    "Real-time chat panel with pagination, message type highlighting, and nickname customization",
    "Multi-device Firebase realtime synchronization for chat, stock, and system state",
    "YouTube Live Chat API integration with quota-conscious polling",
    "Progressive Web App with offline caching and update prompt",
    "Away mode toggle with custom messages and display banner",
    "History modal with sales statistics, session filtering, and CSV export",
    "Live overlay mode for OBS with real-time item display",
    "Voice-price detection and announcement page using speech recognition",
    "Admin proxy commands for manual stock booking",
    "Automatic cancellation detection and queue management",
    "Pull-to-refresh gesture support on mobile"
  ],
  "user_flow_summary": [
    "Admin logs in via Firebase auth and accesses the dashboard showing Stock Grid and Chat Panel side by side",
    "Host device polls YouTube Live Chat and processes incoming chat messages to detect orders, cancellations, and shipping commands",
    "Detected orders update Firebase stock data and trigger TTS announcements and sound effects",
    "All connected client devices sync stock and chat data in real-time through Firebase listeners",
    "Admins can manually book items or manage queues through stock grid inputs",
    "Admins toggle TTS mode (online/offline), sound, and away mode via header controls",
    "User views chat with auto-scroll, loads older messages with pagination, and can export chat and sales history",
    "Streaming overlay displays current item info for viewers via transparent background",
    "Voice price page allows spoken price queries which are processed and announced using TTS"
  ],
  "validation_criteria": [
    "Order processing latency must be under 1 second from chat message to stock update",
    "Multi-device data sync latency below 100ms with no data loss or duplication",
    "TTS audio playback within 3 seconds online and immediate offline fallback",
    "iPad audio unlock properly enables all audio playback after first interaction",
    "YouTube Live API errors handled gracefully and polling respects quota limits",
    "Stock grid accurately shows availability, ownership, and queue count",
    "Chat panel displays up to 200 messages with correct formatting, highlighting, and nickname overrides",
    "History modal correctly filters sessions and exports CSV with complete sales data",
    "PWA functions correctly with offline caching and update prompting",
    "Away mode toggles and messages appear as specified with visual banner",
    "System performs reliably with 500+ messages and 70 stock items without memory leaks or UI lag"
  ],
  "code_summary": {
    "tech_stack": [
      "JavaScript",
      "Vue 3",
      "Vite",
      "Pinia",
      "Firebase",
      "SweetAlert2",
      "PWA (vite-plugin-pwa)"
    ],
    "features": [
      {
        "name": "MainApp",
        "description": "Root application component handling Firebase auth, presence tracking, route/view management (Login, Dashboard, VoicePrice), and global lifecycle",
        "files": [
          "src/App.vue",
          "src/main.js"
        ]
      },
      {
        "name": "ChatPanel",
        "description": "Real-time chat panel displaying messages with special formatting for buy/sell/shipping events, pagination with Load More, and auto-scroll",
        "files": [
          "src/components/ChatPanel.vue"
        ]
      },
      {
        "name": "StockGrid",
        "description": "Interactive stock inventory grid with search, filtering, sorting, quantity adjustment, and real-time Firebase sync",
        "files": [
          "src/components/StockGrid.vue"
        ]
      },
      {
        "name": "Dashboard",
        "description": "Main dashboard view composing StockGrid and ChatPanel side by side with responsive layout",
        "files": [
          "src/components/Dashboard.vue"
        ]
      },
      {
        "name": "Header",
        "description": "App header with navigation, TTS toggle (online/offline), away mode toggle, sound toggle, and user info display",
        "files": [
          "src/components/Header.vue"
        ]
      },
      {
        "name": "HistoryModal",
        "description": "Modal for viewing transaction history with date filtering, search, CSV export, and summary statistics",
        "files": [
          "src/components/HistoryModal.vue"
        ]
      },
      {
        "name": "LiveOverlay",
        "description": "Overlay component for live streaming display with latest transaction info",
        "files": [
          "src/components/LiveOverlay.vue"
        ]
      },
      {
        "name": "VoicePricePage",
        "description": "Voice-activated price checking page with speech recognition and TTS feedback",
        "files": [
          "src/components/VoicePricePage.vue"
        ]
      },
      {
        "name": "UpdatePrompt",
        "description": "PWA update prompt notifying users when a new version is available",
        "files": [
          "src/components/UpdatePrompt.vue"
        ]
      },
      {
        "name": "ChatProcessor",
        "description": "Composable processing incoming chat messages, detecting buy/sell/shipping commands, updating stock, and triggering TTS",
        "files": [
          "src/composables/useChatProcessor.js"
        ]
      },
      {
        "name": "AudioManagement",
        "description": "Composable managing audio playback, sound effects, and TTS audio unlocking for iOS",
        "files": [
          "src/composables/useAudio.js"
        ]
      },
      {
        "name": "VoiceDetector",
        "description": "Composable for speech recognition to detect voice commands for price queries",
        "files": [
          "src/composables/useVoiceDetector.js"
        ]
      },
      {
        "name": "YouTubeIntegration",
        "description": "Composable for connecting to YouTube Live Chat API and streaming messages",
        "files": [
          "src/composables/useYouTube.js"
        ]
      },
      {
        "name": "OllamaAI",
        "description": "Composable for optional Ollama AI integration providing intelligent responses",
        "files": [
          "src/composables/useOllama.js"
        ]
      },
      {
        "name": "GeminiAI",
        "description": "Composable for Google Gemini AI integration",
        "files": [
          "src/composables/useGemini.js"
        ]
      },
      {
        "name": "HistoryManagement",
        "description": "Composable for fetching and managing transaction history from Firebase",
        "files": [
          "src/composables/useHistory.js"
        ]
      },
      {
        "name": "AutoCleanup",
        "description": "Composable for automatic cleanup of old data from Firebase",
        "files": [
          "src/composables/useAutoCleanup.js"
        ]
      },
      {
        "name": "AwayMode",
        "description": "Composable for away mode functionality that auto-responds when user is away",
        "files": [
          "src/composables/useAwayMode.js"
        ]
      },
      {
        "name": "PullToRefresh",
        "description": "Composable implementing pull-to-refresh gesture for mobile/tablet devices",
        "files": [
          "src/composables/usePullToRefresh.js"
        ]
      },
      {
        "name": "TextToSpeech",
        "description": "Service providing TTS capabilities with Google Cloud TTS (online) and native browser TTS (offline) modes",
        "files": [
          "src/services/TextToSpeech.js"
        ]
      },
      {
        "name": "YouTubeLiveChat",
        "description": "Service for polling YouTube Live Chat API and fetching messages",
        "files": [
          "src/services/YouTubeLiveChat.js"
        ]
      },
      {
        "name": "StockStore",
        "description": "Pinia store managing stock inventory state with Firebase real-time sync",
        "files": [
          "src/stores/stock.js"
        ]
      },
      {
        "name": "ChatStore",
        "description": "Pinia store managing chat messages with pagination and memory management",
        "files": [
          "src/stores/chat.js"
        ]
      },
      {
        "name": "SystemStore",
        "description": "Pinia store for system-wide settings (sound, TTS mode, away mode, login state)",
        "files": [
          "src/stores/system.js"
        ]
      },
      {
        "name": "NicknameStore",
        "description": "Pinia store managing user nickname mappings from Firebase",
        "files": [
          "src/stores/nickname.js"
        ]
      },
      {
        "name": "Utilities",
        "description": "Utility modules for error handling, logging, and performance monitoring",
        "files": [
          "src/utils/errorHandler.js",
          "src/utils/logger.js",
          "src/utils/performance.js"
        ]
      },
      {
        "name": "Configuration",
        "description": "App constants and Firebase configuration",
        "files": [
          "src/constants.js",
          "src/config/constants.js"
        ]
      },
      {
        "name": "Styling",
        "description": "Global CSS styles and assets for the application",
        "files": [
          "src/style.css",
          "src/assets/style.css"
        ]
      }
    ]
  }
}
