{
  "rules": {
    ".read": "auth != null",
    ".write": "auth != null",
    "stock": {
      "$videoId": {
        "$itemId": {
          ".validate": "newData.hasChildren(['owner', 'uid', 'time'])",
          "price": {
            ".validate": "newData.isNumber() || newData.val() == null"
          },
          "time": {
            ".validate": "newData.isNumber()"
          },
          "queue": {
            // Queue validation could be complex, keeping simple for now
          }
        }
      }
    },
    "chats": {
      "$videoId": {
        "$messageId": {
          ".validate": "newData.hasChildren(['text', 'uid', 'timestamp'])"
        }
      }
    },
    "overlay": {
      "$videoId": {
        ".validate": "newData.hasChildren(['current_item'])",
        "current_item": {
          "price": {
             ".validate": "newData.isNumber() || newData.val() == null"
          }
        }
      }
    },
    "system": {
      "hostId": {
        ".validate": "newData.isString() || newData.val() == null"
      }
    }
  }
}
